schema_version: v0.1
decision_id: DC-REPO-001
title: "Repo maintenance: evolve ADL engine + CI gate safely"

owner:
  team: "repo-maintainers"
  approver: "human:@lexseasson"

intent:
  goal: "Allow self-governance changes in agentic-decision-ledger with explicit bounded authority."
  scope:
    includes:
      - "adl engine changes"
      - "github action integration"
      - "repo workflows"
      - "tests and docs"
    excludes:
      - "secrets handling"
      - "deployment credentials"
      - "external infra provisioning"

assumptions:
  - "This contract is ONLY for maintaining agentic-decision-ledger itself."
  - "Install/demo contracts are separate and may be stricter."
  - "No PII is processed by the gate; artifacts are repo-local."

constraints:
  bounded_authority:
    can_write_paths:
      - "adl/"
      - "integrations/"
      - "tests/"
      - "docs/"
      - "decisions/"
      - ".github/workflows/"
      - "pyproject.toml"
      - "README.md"
      - "LICENSE"
      - ".gitignore"
      - "artifacts/"
    cannot_touch:
      - "secrets/"
      - ".env"
      - ".env.*"
      - "private_keys/"
      - "id_rsa"
      - "id_ed25519"
      - ".github/workflows/production-deploy.yml"

alternatives_rejected:
  - option: "Use the install/demo contract to govern this repo"
    rejected_because: "It would block legitimate self-governance changes (workflows + engine), preventing safe evolution."
  - option: "Rely on logs only"
    rejected_because: "Logs do not encode admissibility; audits degrade into post-hoc reconstruction."

success_criteria:
  - "CI passes: ruff + mypy + pytest"
  - "Gate computes changed_paths deterministically in GitHub Actions"
  - "adl record emits decision_record + snapshot artifacts"
  - "CI blocks if forbidden paths are modified"
