{
  "schema_version": "v0.2",
  "artifact": "decision_debt_report",
  "generated_at_utc": "{{UTC_ISO}}",

  "run": {
    "repo": "{{REPO_SLUG}}",
    "ref": "{{GIT_REF}}",
    "base_sha": "{{BASE_SHA}}",
    "head_sha": "{{HEAD_SHA}}",
    "ci": { "provider": "github-actions", "run_id": "{{RUN_ID}}", "route": "{{ROUTE}}" }
  },

  "method": {
    "deterministic": true,
    "inputs": [
      "contract YAMLs under decisions/contracts/",
      "git history metadata (optional if available)",
      "current diff changed paths",
      "evaluation outputs (admit/block + failures)"
    ],
    "debt_dimensions": [
      "age_without_revalidation",
      "assumption_fragility",
      "high_volatility",
      "boundary_pressure_recurrence",
      "owner_ambiguity",
      "evidence_gap"
    ],
    "scoring": {
      "scale": "0..1",
      "interpretation": {
        "0.0-0.2": "low",
        "0.2-0.5": "medium",
        "0.5-1.0": "high"
      }
    }
  },

  "portfolio": {
    "contracts_total": {{CONTRACT_COUNT}},
    "contracts_evaluated_this_run": ["{{DECISION_ID_1}}", "{{DECISION_ID_2}}"]
  },

  "items": [
    {
      "decision_id": "DC-REPO-001",
      "title": "Repo maintenance: evolve governance layer safely",
      "owner": { "team": "repo-maintainers", "approver": "human:@maintainer_handle" },

      "signals": {
        "age_days_since_last_owner_ack": {{AGE_DAYS_OR_NULL}},
        "assumptions_count": {{ASSUMPTIONS_COUNT}},
        "assumptions_with_evidence_refs_count": {{ASSUMPTIONS_WITH_EVIDENCE_REFS}},
        "volatility_90d": {
          "contract_file_commits": {{COMMITS_90D_OR_NULL}},
          "sensitive_field_changes": {{SENSITIVE_CHANGES_90D_OR_NULL}}
        },
        "boundary_pressure_30d": {
          "runs_with_pressure_medium_or_higher": {{PRESSURE_RUNS_30D_OR_NULL}},
          "forbidden_touch_attempts": {{FORBIDDEN_ATTEMPTS_30D_OR_NULL}}
        },
        "owner_ambiguity": {
          "approver_format_valid": {{APPROVER_VALID_BOOL}},
          "team_present": {{TEAM_PRESENT_BOOL}}
        },
        "evidence_gap": {
          "missing_refs": ["{{MISSING_REF_1}}", "{{MISSING_REF_2}}"]
        }
      },

      "debt": {
        "score_0_to_1": {{DEBT_SCORE}},
        "level": "{{low|medium|high}}",
        "drivers": [
          {
            "dimension": "evidence_gap",
            "weight": 0.35,
            "value_0_to_1": {{VALUE}},
            "impact": {{IMPACT}},
            "why": "Assumptions exist without external evidence references."
          },
          {
            "dimension": "high_volatility",
            "weight": 0.25,
            "value_0_to_1": {{VALUE}},
            "impact": {{IMPACT}},
            "why": "Sensitive fields changed repeatedly in the last 90 days."
          }
        ]
      },

      "revalidation": {
        "recommended": true,
        "trigger": "time_or_pressure",
        "policy": {
          "max_age_days": 90,
          "pressure_level_threshold": "high",
          "pressure_runs_threshold_30d": 3
        },
        "actions": [
          {
            "priority": "P1",
            "action": "Add evidence_refs for key assumptions (CI determinism, governance surfaces).",
            "rationale": "Reduces audit friction and prevents post-hoc rationalization."
          },
          {
            "priority": "P2",
            "action": "Document explicit owner/approver semantics for maintenance posture.",
            "rationale": "Eliminates unowned decision ambiguity in incidents."
          }
        ]
      }
    }
  ],

  "rollups": {
    "highest_debt_contracts": [
      { "decision_id": "{{DECISION_ID}}", "score_0_to_1": {{SCORE}} }
    ],
    "debt_by_dimension": [
      { "dimension": "evidence_gap", "average_score": {{AVG}} },
      { "dimension": "high_volatility", "average_score": {{AVG}} }
    ]
  },

  "integrity": {
    "inputs_hash": "sha256:{{SHA256_INPUTS}}",
    "artifact_hash": "sha256:{{SHA256_SELF}}",
    "reproducible": true
  }
}
